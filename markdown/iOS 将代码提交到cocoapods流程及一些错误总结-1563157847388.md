æœ€è¿‘åšä¸€ä¸ªSDKï¼Œéœ€è¦ç”¨cocoapodså‘å¸ƒï¼Œä¸‹é¢æ€»ç»“ä¸‹å‘å¸ƒæµç¨‹ï¼ŒåŠä¸€äº›å‘
é¦–å…ˆæ¢³ç†ä¸‹å¤§è‡´æµç¨‹

- 1.å°†ä»£ç æäº¤åˆ°ä»“åº“
- 2.æ³¨å†Œtrunkè´¦æˆ·
- 3.åˆ›å»ºpodspecæ–‡ä»¶
- 4.æäº¤ä»£ç 

é¦–å…ˆï¼Œå°†æˆ‘ä»¬çš„podæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬

```
sudo gem install cocoapods
```
æ›´æ–°çš„æ—¶å€™å¯èƒ½æŠ¥é”™ï¼Œä¸‹é¢æ˜¯é”™è¯¯ä¿¡æ¯

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions for the /usr/bin directory.
```
è§£å†³åŠæ³•

```
sudo gem install -n /usr/local/bin cocoapods
```
podæ›´æ–°å®Œä¹‹åï¼Œå¼€å§‹æˆ‘ä»¬çš„æäº¤
####1.å°†ä»£ç æäº¤åˆ°ä»“åº“

***æ³¨æ„ï¼Œä»»æ„ä»“åº“éƒ½è¡Œï¼Œä¸ä¸€å®šéè¦github***

è¿™ä¸€éƒ¨åˆ†ä¸åšç»†è¯´ï¼Œgitç”¨æ³•è‡ªè¡Œç™¾åº¦ï¼Œä¸‹é¢æ˜¯ä¸€äº›æ³¨æ„äº‹é¡¹

- gitä¸Šåˆ›å»ºé¡¹ç›®çš„æ—¶å€™æœ€å¥½å¸¦ä¸Š`.gitignore`ï¼Œ`README.me`ï¼Œ`LICENSE`æ–‡ä»¶ï¼Œè¿™æ ·æ–¹ä¾¿åç»­ä½¿ç”¨

- ç»™è¦å‘å¸ƒçš„ç‰ˆæœ¬åŠ ***tag***ï¼Œpodåœ¨æ‹‰å–ä»£ç çš„æ—¶å€™æ˜¯æ ¹æ®tagçš„ï¼Œä¹Ÿå¯ä»¥æ ¹æ®commitæ‹‰å–ï¼Œä½†æ˜¯commitå¤ªé•¿ï¼Œå¦å¤–å¯ä»¥å°†tagå’Œversionè®¾ç½®ç›¸åŒï¼Œæ–¹ä¾¿ç®¡ç†

ä¸‹é¢æ˜¯ç®€å•çš„æäº¤ä»£ç å’Œæäº¤tagçš„å‘½ä»¤ï¼Œå¦‚æœå‡ºé”™äº†ï¼Œç™¾åº¦gitç”¨æ³•

```
git add . 
git commit -m â€œversion 1.0.0â€ 
git push origin master

git tag '1.0.0' 
git push --tags
git tag        //æŸ¥çœ‹tag
git tag -d '1.0.0'  // åˆ é™¤æŒ‡å®šæ ‡ç­¾
```

####2.æ³¨å†Œtrunkè´¦æˆ·

æƒ³è¦å‘å¸ƒä»£ç ï¼Œå¾—å…ˆæ³¨å†Œè´¦æˆ·

```
pod trunk register é‚®ç®± 'ç”¨æˆ·å' --verbose
```
æ³¨å†ŒæˆåŠŸååœ¨ä½ è¾“å…¥çš„é‚®ç®±ä¸­ä¼šæ”¶åˆ°ä¸€å°é‚®ä»¶ï¼Œ ä¸‹é¢æ˜¯é‚®ä»¶å†…å®¹

```
Hi Miridescent,

Please confirm your registration with CocoaPods by clicking the following link:

https://trunk.cocoapods.org/sessions/verify/712c7c88
If you did not request this you do not need to take any further action.

Kind regards, the CocoaPods team
```
ç‚¹å‡»é‚®ä»¶ä¸­ç½‘å€ï¼Œè·³è½¬åˆ°ç½‘é¡µå³æ³¨å†ŒæˆåŠŸï¼Œå¦‚æœä¸èƒ½ç‚¹å‡»ï¼Œå¤åˆ¶ç²˜è´´åˆ°æµè§ˆå™¨æ‰“å¼€ä¹Ÿå¯ä»¥

æ·»åŠ å…¶ä»–ç»´æŠ¤è€…ï¼ˆå¦‚æœä½ çš„podæ˜¯ç”±å¤šäººç»´æŠ¤çš„ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–ç»´æŠ¤è€…ï¼‰

```
pod trunk add-owner åº“å å…±åŒç»´æŠ¤è€…é‚®ç®±
```

####3.åˆ›å»ºpodspecæ–‡ä»¶
å‘½ä»¤

```
pod spec create test 
```
ä¼šç”Ÿæˆä¸€ä¸ª`test.podspec`æ–‡ä»¶
ç”¨ç¼–è¾‘å™¨æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå‘ç°æœ‰è®¸å¤šå†…å®¹ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯æ³¨é‡Šï¼Œæˆ‘ä»¬åªè¦æ ¹æ®éœ€è¦ä¿ç•™è‡ªå·±æƒ³è¦çš„éƒ¨åˆ†å³å¯ï¼Œä¸»è¦çš„å‡ ä¸ªå‚æ•°å¦‚ä¸‹

```
Pod::Spec.new do |s|
  s.name         = "test"  // åç§°
  s.version      = "1.0.0" // ç‰ˆæœ¬
  s.summary      = "test pod"  // æ€»ç»“
  s.description  = 'test pod a'  // æè¿°
  s.homepage     = "https://github.com/Miridescen/coco_test1" // é¡¹ç›®ä¸»é¡µ
  s.license      = { :type => "MIT", :file => "LICENSE" }  // åè®®æ–‡ä»¶
  s.author             = { "xx" => "é‚®ç®±" } // ä½œè€…
  s.platform     = :ios, "8.0" // æ”¯æŒçš„ç‰ˆæœ¬
  s.ios.deployment_target = "8.0" // ioså¼€å‘æ”¯æŒçš„ç‰ˆæœ¬ï¼Œå¯¹åº”çš„è¿˜æœ‰tvOSã€watchOSç­‰
  s.source       = { :git => "https://github.com/Miridescen/coco_test1.git", :tag => s.version }  ä»£ç åœ°å€
  s.source_files  = "trs_ta_sdk_test", "trs_ta_sdk.framework/**/*.{h,m,c}" // è¦å‘å¸ƒçš„æ–‡ä»¶
  s.vendored_frameworks = 'trs_ta_sdk.framework' // è¦å‘å¸ƒçš„frameworkæ¡†æ¶
  s.public_header_files = 'trs_ta_sdk.framework/Headers/*.h'  // è¦æ˜¾ç¤ºçš„å¤´æ–‡ä»¶
  s.frameworks = "UIKit", "Foundation" // å¼•ç”¨çš„æ¡†æ¶
  s.requires_arc = true // æ˜¯å¦æ”¯æŒARC
end

```

å¤§è‡´å°±æ˜¯è¿™äº›å°±å¯ä»¥ï¼Œå…¶ä¸­æœ‰ä»¥ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„

- s.descriptionè¦æ¯”s.summaryé•¿ï¼Œå¦åˆ™ä¼šæŠ¥è­¦å‘Š

```
 - WARN  | description: The description is shorter than the summary.
```
- s.licenseä¸­çš„æ ‡æ˜çš„æ–‡ä»¶å¿…é¡»æœ‰å¯¹åº”çš„å­˜åœ¨ï¼Œå¦åˆ™ä¼šæŠ¥è­¦å‘Š
- s. sourceä¸­çš„ç‰ˆæœ¬å·å¿…é¡»åœ¨ä»“åº“ä¸­æœ‰å¯¹åº”çš„æ ‡ç­¾ï¼Œå¦åˆ™ä¼šæŠ¥è­¦å‘Šï¼Œå…¶å®è¿™é‡Œçš„tagå‚æ•°å¯ä»¥ç”¨commitä»£æ›¿ï¼Œåé¢æ¥çš„æ˜¯å¯¹åº”çš„commitå€¼ï¼Œå°±æ˜¯`ba01464749bb73e4bc380a9301e2ce8e7bfab3f3`è¿™æ ·çš„ä¸€å¤§é•¿ä¸²ä¸œè¥¿

***æœ€å¥½å°†s.versionå’Œtagç›¸å¯¹åº”ï¼Œè¿™æ ·æ–¹ä¾¿æŸ¥æ‰¾ç®¡ç†***

```
- WARN  | source: The version should be included in the Git tag.
```

- s.source_filesè¿™ä¸ªè·¯å¾„å¾ˆé‡è¦ï¼Œä¸è¦å¡«é”™äº†ï¼Œå¯ä»¥ç”¨*åŒ¹é…ï¼Œä¸‹é¢æ˜¯åŒ¹é…è§„åˆ™

`*`è¡¨ç¤ºåŒ¹é…æ‰€æœ‰æ–‡ä»¶

`*.{h,m}` è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä»¥.hå’Œ.mç»“å°¾çš„æ–‡ä»¶

`**` è¡¨ç¤ºåŒ¹é…æ‰€æœ‰å­ç›®å½•
é…ç½®å¥½æ–‡ä»¶ä¹‹åæ£€æŸ¥podspecæ˜¯å¦åˆæ ¼

```
pod spec lint test.podspec
```
å¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯ä¼šæœ‰æç¤º

```
Analyzed 1 podspec.

test.podspec passed validation.
```
è¿™é‡Œæœ‰å¯èƒ½ä¼šå‡ºç°ä¸€ä¸ªçœ‹ä¸æ‡‚çš„æŠ¥é”™

```
    - ERROR | [iOS] unknown: Encountered an unknown error (/usr/bin/xcrun simctl list -j devices

xcrun: error: unable to find utility "simctl", not a developer tool or in PATH
) during validation.
```
è¿™æ—¶æˆ‘ä»¬éœ€è¦ä¿®æ”¹xcodeçš„å‘½ä»¤è¡Œå·¥å…·é…ç½®
xcode->prefences->locations->command line toolsï¼Œå¦‚ä¸‹å›¾
![command line tools](https://upload-images.jianshu.io/upload_images/2048405-9fc4605787712ab3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/620)

####4.æäº¤ä»£ç 

ä¸Šé¢çš„ä¸œè¥¿éƒ½å‡†å¤‡å¥½ä¹‹åï¼Œç›´æ¥

```
pod trunk push
```
æˆåŠŸä¹‹åä¼šæœ‰ä¸‹é¢çš„æç¤º

```
--------------------------------------------------------------------------------
 ğŸ‰  Congrats

 ğŸš€  xxx (1.0.0) successfully published
 ğŸ“…  May 20th, 23:59
 ğŸŒ  https://cocoapods.org/pods/xxx
 ğŸ‘  Tell your friends!
--------------------------------------------------------------------------------
```
æ­å–œä½ ï¼Œæäº¤æˆåŠŸäº†ï¼Œå¯ä»¥å¿«ä¹çš„ç©è€äº†

```
pod search xxx
```
å‘½ä»¤å¯ä»¥æœç´¢ä¸‹æˆ‘ä»¬åˆšåˆšæäº¤çš„ä»£ç ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯

```
[!] Unable to find a pod with name, author, summary, or description matching `xxx`
```
è¿™æ˜¯podæ²¡æœ‰åŠæ—¶çš„æ›´æ–°ä¾èµ–åº“ï¼Œå¯ä»¥æœ‰ä¸‹é¢ä¸¤ç§è§£å†³åŠæ³•
 `pod setup`æ‰§è¡Œæ›´æ–°

å¦‚æœè¿˜ä¸è¡Œçš„è¯å…ˆç§»é™¤`search_index.json`æ–‡ä»¶ï¼Œç„¶åé‡æ–°åˆ›å»º

```
rm ~/Library/Caches/CocoaPods/search_index.json
pod search xxx
```
è¿™é‡Œå¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„ç§»é™¤ï¼Œåœ¨æ‰§è¡Œ`pod search xxx`çš„æ—¶å€™`search_index.json`æ–‡ä»¶å°±ä¼šè‡ªåŠ¨åˆ›å»º
ä¸Šé¢å°±æ˜¯ä¸€äº›æ€»ç»“å’Œä¸€äº›å‘ï¼Œæœ‰é—®é¢˜å¯ä»¥æå‡ºä¸€èµ·äº¤æµ
